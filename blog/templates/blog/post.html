{% extends "blog/layout.html" %}
{% block middle-body %}
<!-- 文章展示区域 -->
{% if status %}
<div id="article-zone" class="inner-box">
    <article class="post-body">
        <header class="t-header" style="background-image:url({{cover}})">
            <h3>{{title}}</h3>
        </header>
        <div class="content">
            <p class="text-muted" style="font-size: 0.75rem;">
                <span>作者：</span><a href="." class="text-muted">{{author}}</a><span> |
                    &nbsp;分类：</span><a href="." class="text-muted">{{category}}</a><span>
                    |&nbsp;发布于：</span><time>{{time}}</time>
            </p>
            <section>{{body|safe}}
            </section>
        </div>
    </article>
    <div class="show-comments">
        {% for comment in comments.comments %}
        <div class="com">
            <div class="com-author">
                {{comment.fields.author}}
            </div>
            <div class="com-body">
                {{comment.fields.body}}
            </div>
        </div>
        {% endfor %}
        <!-- 评论页码区域 -->
        <div id="page-zone">
            <ul id="page-list">
                <li id="front"><i class="fas fa-angle-left"></i></li>
                {% for page in comments.page_list %}
                <li id="pagenum{{id}}"><button onclick="jump('{{page}}')">{{page}}</button></li>
                {% endfor %}
                <li id="next"><i class="fas fa-angle-right"></i></li>
            </ul>
        </div>
        <script>
            var active = "pagenum" + "{{comments.active_page}}";
            $('#' + active).addClass("active");
            var active_num = parseInt("{{comments.active_page}}");
            if (active_num == 1) {
                $("#front").click(function () {
                    alert("已经是第一页了！")
                });
            } else {
                $("#front").attr("href", "/blog/?postid={{id}}&page=" + (active_num - 1));
            };
            if (active_num == parseInt("{{page_list.total}}")) {
                $("#next").click(function () {
                    alert("已经是最后一页了！")
                });
            } else {
                $("#next").attr("href", "/blog/?postid={{id}}&page=" + (active_num + 1));
            };
        </script>
    </div>
    <div class="new-comments">

    </div>

</div>
{% endif %}
{% endblock %}