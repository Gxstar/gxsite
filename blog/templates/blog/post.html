{% extends "blog/layout.html" %}
{% block middle-body %}
<!-- 文章展示区域 -->
{% if status %}
<div id="article-zone" class="inner-box">
    <article class="post-body">
        <header class="t-header" style="background-image:url({{cover}})">
            <h3>{{title}}</h3>
        </header>
        <div class="content">
            <p class="text-muted" style="font-size: 0.75rem;">
                <span>作者：</span><a href="." class="text-muted">{{author}}</a><span> |
                    &nbsp;分类：</span><a href="." class="text-muted">{{category}}</a><span>
                    |&nbsp;发布于：</span><time>{{time}}</time>
            </p>
            <section>{{body|safe}}
            </section>
        </div>
    </article>
    <div class="show-comments">
        <p id="com-header">文章评论</p>
        {% for comment in comments.comments %}
        <div class="com">
            <div class="com-author">
                <p>{{comment.fields.author}}</p>
            </div>
            <div class="com-body">
                <p>{{comment.fields.body}}</p>
            </div>
        </div>
        {% endfor %}
        <!-- 评论页码区域 -->
        <div id="page-zone">
            <ul id="page-list">
                <li id="front"><i class="fas fa-angle-left"></i></li>
                {% for page in comments.page_list %}
                <li id="pagenum{{page}}" onclick="jump('{{page}}',this)">{{page}}</li>
                {% endfor %}
                <li id="next"><i class="fas fa-angle-right"></i></li>
            </ul>
        </div>
        <script>
            var active = "pagenum" + "{{comments.active_page}}";
            $("#" + active).addClass("active");
            var first = parseInt("{{comments.page_list.0}}");
        </script>
    </div>
    <div class="new-comment">
        <form action="sub-com" method="post">
            {% csrf_token %}
            <div class="form-group">
                <label for="c-author">昵称</label>
                <input type="text" name="c-author" id="c-author">
            </div>
            <div class="form-group">
                <label for="c-email">邮箱</label>
                <input type="c-email" name="c-email" id="c-email">
            </div>
            <div class="form-group">
                <label for="c-body" style="display: block;line-height: 1.5;">评论</label>
                <textarea cols="85" rows="5" name="c-body" id="c-body"></textarea>
            </div>
            <div class="form-group">
                {{ capform.captcha.label_tag }}
                {{ capform.captcha }}
            </div>
            <div class="form-group">
                <input type="submit" name="subbtn" id="subbtn">
            </div>
        </form>
    </div>

</div>
{% endif %}
{% endblock %}